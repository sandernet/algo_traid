# Алгоритмический торговый бот для Bybit

## Описание

Проект представляет собой модульную систему алгоритмической торговли криптовалютой с поддержкой бэктестинга для биржи Bybit. Основные возможности:

- Загрузка и хранение исторических данных (OHLCV) для анализа
- Реализация торговых стратегий на основе технических индикаторов
- Бэктестинг стратегий на исторических данных
- Интеграция с Telegram для уведомлений и управления
- Управление рисками и размером позиций
- Конфигурация через YAML файл

## Структура проекта

```
├── app.py              # Точка входа приложения
├── templates/          # Шаблоны отчета
├── configs/            # Конфигурационные файлы
├── src/               
│   ├── bybit/         # Интеграция с Bybit API
│   ├── backtester/    # Бэктестинг стратегий
│   ├── data_fetcher/  # Получение исторических данных с биржи
│   ├── config/        # Управление конфигурацией
│   ├── logical/       # Основная торговая логика
│   ├── trading_engine/  # Блок управления позициями
│   ├── risk_manager/  # Управление рисками
│   ├── schedulers/    # Планировщики задач
│   ├── telegram/      # Telegram бот
│   └── utils/         # Вспомогательные функции
```

## Основные компоненты

### Торговые стратегии
- Стратегия на основе ZigZag и уровней Фибоначчи


### Риск-менеджмент
- Stop Loss и Take Profit
- Контроль максимального количества позиций
- Расчет размера позиции от депозита

### Интеграции
- Bybit API для торговли
- Telegram бот для уведомлений и управления
- Система логирования

## Установка

1. Создание виртуального окружения:
```bash
python -m venv venv
source venv/bin/activate  # Linux
venv\Scripts\activate     # Windows
```

2. Установка зависимостей:
```bash
pip install -r requirements.txt
```

## Настройка

1. Скопируйте `config.yaml.example` в `config.yaml`
2. Заполните необходимые параметры:
   - API ключи Bybit
   - Настройки торговых пар
   - Параметры стратегий
   - Telegram токен

## Использование

Запуск загрузки исторических данных:
```bash
python app.py --ldata
```

Запуск отладки стратегии:
```bash
python app.py --debug
```

Запуск бэктестера:
```bash
python app.py --btest
```

## Конфигурация

Основные настройки в `configs/config.yaml`:

- `COINS` - список торгуемых пар
- `EXCHANGE_SETTINGS` - настройки биржи
- `STRATEGY_SETTINGS` - параметры стратегий
- `RISK_SETTINGS` - настройки риск-менеджмента
- `BACKTEST_SETTINGS` - режим работы (live/backtest)
- `LOGGING_SETTINGS` - настройки логирования
- `TELEGRAM_SETTINGS` - настройки Telegram бота

## Docker

Проект поддерживает запуск в Docker контейнерах. Доступны следующие конфигурации:

### Производственный режим
```bash
docker compose up trading_bot
```

### Режим разработки
```bash
docker compose up trading_bot_dev
```

### Загрузка данных
```bash
docker compose up trading_bot_data
```

### Сборка образов
```bash
docker compose build
```

Volumes:
- `./DATA_OHLCV`: Хранение исторических данных
- `./configs`: Конфигурационные файлы
- `./LOGS`: Логи работы бота
- `./REPORTS`: Отчёты о работе бота

Для остановки контейнеров:
```bash
docker-compose down
```